<!DOCTYPE html>
<!--
  制作者：YN
  日期：2025-11-28
  版本：v3.0 - 现代化UI重构版（SaaS + Glassmorphism）
-->
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>提示词管理工具</title>
    <style>
        /* ===== 设计系统 (Design Tokens) ===== */
        :root {
            /* 主色系 - Indigo/Violet */
            --primary-hue: 250;
            --primary: hsl(var(--primary-hue), 90%, 60%);
            --primary-hover: hsl(var(--primary-hue), 90%, 50%);
            --primary-light: hsl(var(--primary-hue), 90%, 95%);
            --primary-glow: hsla(var(--primary-hue), 90%, 60%, 0.3);

            /* 语义色 */
            --success: #10b981;
            --success-light: rgba(16, 185, 129, 0.1);
            --warning: #f59e0b;
            --warning-light: rgba(245, 158, 11, 0.1);
            --danger: #ef4444;
            --danger-light: rgba(239, 68, 68, 0.1);
            --info: #3b82f6;

            /* 亮色主题 */
            --bg-body: #f1f5f9;
            --bg-card: #ffffff;
            --bg-elevated: #ffffff;
            --bg-glass: rgba(255, 255, 255, 0.8);
            --bg-input: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --border-subtle: rgba(0, 0, 0, 0.06);
            --divider: #f1f5f9;

            /* 阴影系统 */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.16);
            --shadow-glow: 0 0 20px var(--primary-glow);

            /* 玻璃效果 */
            --blur-glass: blur(16px);
            --blur-overlay: blur(8px);

            /* 间距系统 */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 12px;
            --space-lg: 16px;
            --space-xl: 24px;
            --space-2xl: 32px;
            --space-3xl: 48px;

            /* 字体系统 */
            --font-xs: 12px;
            --font-sm: 13px;
            --font-base: 14px;
            --font-md: 15px;
            --font-lg: 17px;
            --font-xl: 20px;
            --font-2xl: 24px;
            --font-3xl: 32px;

            /* 圆角系统 */
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 14px;
            --radius-xl: 20px;
            --radius-full: 9999px;

            /* 布局 */
            --sidebar-width: 260px;
            --topbar-height: 64px;
            --transition-fast: 0.15s ease;
            --transition-normal: 0.25s ease;
            --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* 暗色主题 */
        [data-theme="dark"] {
            --bg-body: #0c1222;
            --bg-card: #1a2332;
            --bg-elevated: #1e293b;
            --bg-glass: rgba(26, 35, 50, 0.85);
            --bg-input: #0f172a;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: #334155;
            --border-subtle: rgba(255, 255, 255, 0.08);
            --divider: #1e293b;
            --primary-light: hsla(var(--primary-hue), 90%, 60%, 0.15);
        }

        /* ===== 重置样式 ===== */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'SF Pro Display', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-body);
            color: var(--text-primary);
            line-height: 1.5;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        a { color: inherit; text-decoration: none; }
        button { font-family: inherit; cursor: pointer; }
        input, textarea, select { font-family: inherit; }

        /* 模态框打开时锁定背景滚动 */
        body.modal-open {
            overflow: hidden;
        }

        /* 视觉隐藏但保留可访问性 */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* ===== 工具类 ===== */
        .icon {
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .icon svg {
            width: 100%;
            height: 100%;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        .icon-sm { width: 16px; height: 16px; }
        .icon-lg { width: 24px; height: 24px; }

        .desktop-only { display: none; }
        .mobile-only { display: flex; }

        @media (min-width: 768px) {
            .desktop-only { display: flex; }
            .mobile-only { display: none; }
        }

        /* ===== App Shell 布局 ===== */
        .app-shell {
            display: flex;
            min-height: 100vh;
        }

        /* ===== 侧边栏 ===== */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: var(--sidebar-width);
            background: var(--bg-glass);
            backdrop-filter: var(--blur-glass);
            -webkit-backdrop-filter: var(--blur-glass);
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
            z-index: 100;
            transform: translateX(-100%);
            transition: transform var(--transition-slow);
        }

        .sidebar.open {
            transform: translateX(0);
        }

        @media (min-width: 1024px) {
            .sidebar {
                transform: translateX(0);
            }
        }

        .sidebar-header {
            padding: var(--space-xl);
            border-bottom: 1px solid var(--border-subtle);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            font-size: var(--font-lg);
            font-weight: 700;
            color: var(--text-primary);
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary), hsl(280, 90%, 60%));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .sidebar-nav {
            flex: 1;
            padding: var(--space-lg);
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: var(--space-xl);
        }

        .nav-section-title {
            font-size: var(--font-xs);
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0 var(--space-md);
            margin-bottom: var(--space-sm);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-md);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            font-size: var(--font-base);
            font-weight: 500;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
            transition: all var(--transition-fast);
            cursor: pointer;
        }

        .nav-item:hover {
            background: var(--primary-light);
            color: var(--primary);
        }

        .nav-item.active {
            background: var(--primary-light);
            color: var(--primary);
        }

        .nav-item-count {
            margin-left: auto;
            font-size: var(--font-xs);
            color: var(--text-muted);
            background: var(--bg-body);
            padding: 2px 8px;
            border-radius: var(--radius-full);
        }

        .sidebar-footer {
            padding: var(--space-lg);
            border-top: 1px solid var(--border-subtle);
        }

        .sync-status {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-sm);
            color: var(--text-muted);
        }

        .sync-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-muted);
        }

        .sync-dot.online {
            background: var(--success);
            box-shadow: 0 0 8px var(--success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ===== 主内容区 ===== */
        .main-content {
            flex: 1;
            margin-left: 0;
            min-width: 0;
            transition: margin var(--transition-slow);
        }

        @media (min-width: 1024px) {
            .main-content {
                margin-left: var(--sidebar-width);
            }
        }

        /* ===== 顶部栏 ===== */
        .topbar {
            position: sticky;
            top: 0;
            z-index: 50;
            height: var(--topbar-height);
            background: var(--bg-glass);
            backdrop-filter: var(--blur-glass);
            -webkit-backdrop-filter: var(--blur-glass);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            padding: 0 var(--space-xl);
            gap: var(--space-lg);
        }

        .menu-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .menu-toggle:hover {
            background: var(--primary-light);
            color: var(--primary);
        }

        @media (min-width: 1024px) {
            .menu-toggle { display: none; }
        }

        .search-container {
            flex: 1;
            max-width: 480px;
            position: relative;
        }

        .search-input {
            width: 100%;
            height: 40px;
            padding: 0 var(--space-lg) 0 44px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            font-size: var(--font-base);
            background: var(--bg-input);
            color: var(--text-primary);
            transition: all var(--transition-fast);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .search-icon {
            position: absolute;
            left: var(--space-lg);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            pointer-events: none;
        }

        .topbar-actions {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        /* ===== 按钮系统 ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: 0 var(--space-lg);
            height: 40px;
            border-radius: var(--radius-md);
            font-size: var(--font-base);
            font-weight: 500;
            border: none;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .btn:active {
            transform: scale(0.97);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
            box-shadow: var(--shadow-glow);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
        }

        .btn-ghost:hover {
            background: var(--primary-light);
            color: var(--primary);
        }

        .btn-danger {
            background: var(--danger-light);
            color: var(--danger);
        }

        .btn-danger:hover {
            background: var(--danger);
            color: white;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            border-radius: var(--radius-md);
        }

        .btn-sm {
            height: 32px;
            padding: 0 var(--space-md);
            font-size: var(--font-sm);
        }

        .btn-sm.btn-icon {
            width: 32px;
            padding: 0;
        }

        /* ===== 内容区域 ===== */
        .content-area {
            padding: var(--space-xl);
        }

        @media (min-width: 768px) {
            .content-area {
                padding: var(--space-2xl);
            }
        }

        /* ===== 工具栏 ===== */
        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .filter-group {
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
        }

        .select-control {
            height: 36px;
            padding: 0 var(--space-lg) 0 var(--space-md);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--font-sm);
            background: var(--bg-card);
            color: var(--text-primary);
            cursor: pointer;
            min-width: 120px;
            transition: all var(--transition-fast);
        }

        .select-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* ===== 提示词卡片网格 ===== */
        .prompts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-lg);
        }

        @media (min-width: 640px) {
            .prompts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .prompts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1280px) {
            .prompts-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1536px) {
            .prompts-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* ===== 提示词卡片 ===== */
        .prompt-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            cursor: pointer;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .prompt-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--success);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .prompt-card.private::before {
            background: var(--warning);
        }

        .prompt-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .prompt-card:hover::before {
            opacity: 1;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-md);
            gap: var(--space-sm);
        }

        .card-title {
            font-size: var(--font-md);
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.4;
            flex: 1;
            word-break: break-word;
        }

        .card-badges {
            display: flex;
            gap: var(--space-xs);
            flex-shrink: 0;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            font-weight: 500;
        }

        .badge-private {
            background: var(--warning-light);
            color: var(--warning);
        }

        .badge-public {
            background: var(--success-light);
            color: var(--success);
        }

        .badge-pinned {
            background: var(--primary-light);
            color: var(--primary);
        }

        .badge-category {
            background: var(--bg-body);
            color: var(--text-secondary);
        }

        .card-content {
            margin-bottom: var(--space-lg);
        }

        .card-description {
            color: var(--text-secondary);
            font-size: var(--font-sm);
            line-height: 1.6;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-preview {
            color: var(--text-muted);
            font-size: var(--font-xs);
            line-height: 1.5;
            margin-top: var(--space-sm);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            opacity: 0.7;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: var(--space-md);
            border-top: 1px solid var(--divider);
        }

        .card-meta {
            display: flex;
            gap: var(--space-lg);
            font-size: var(--font-xs);
            color: var(--text-muted);
        }

        .card-meta-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .card-actions {
            display: flex;
            gap: var(--space-xs);
            opacity: 0;
            transform: translateX(8px);
            transition: all var(--transition-fast);
        }

        .prompt-card:hover .card-actions {
            opacity: 1;
            transform: translateX(0);
        }

        /* ===== 空状态 ===== */
        .empty-state {
            text-align: center;
            padding: var(--space-3xl) var(--space-xl);
        }

        .empty-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--space-xl);
            background: var(--primary-light);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .empty-title {
            font-size: var(--font-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }

        .empty-text {
            color: var(--text-muted);
            margin-bottom: var(--space-xl);
        }

        /* ===== FAB (浮动操作按钮) ===== */
        .fab {
            position: fixed;
            right: var(--space-xl);
            bottom: var(--space-xl);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            box-shadow: var(--shadow-lg), var(--shadow-glow);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 90;
            transition: all var(--transition-fast);
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl), 0 0 30px var(--primary-glow);
        }

        .fab:active {
            transform: scale(0.95);
        }

        @media (min-width: 768px) {
            .fab { display: none; }
        }

        /* ===== 模态框 ===== */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: var(--blur-overlay);
            -webkit-backdrop-filter: var(--blur-overlay);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            padding: var(--space-lg);
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 560px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-xl);
            animation: modalEnter 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-xl);
            border-bottom: 1px solid var(--divider);
        }

        .modal-title {
            font-size: var(--font-lg);
            font-weight: 600;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background: var(--danger-light);
            color: var(--danger);
        }

        .modal-body {
            padding: var(--space-xl);
            overflow-y: auto;
            flex: 1;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--space-md);
            padding: var(--space-xl);
            border-top: 1px solid var(--divider);
        }

        /* ===== 表单 ===== */
        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-label {
            display: block;
            font-size: var(--font-sm);
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }

        .form-control {
            width: 100%;
            padding: var(--space-md);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--font-base);
            background: var(--bg-input);
            color: var(--text-primary);
            transition: all var(--transition-fast);
        }

        .form-control::placeholder {
            color: var(--text-muted);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        textarea.form-control {
            min-height: 140px;
            resize: vertical;
            font-family: 'SF Mono', 'Fira Code', Consolas, monospace;
            font-size: var(--font-sm);
            line-height: 1.6;
        }

        .form-hint {
            font-size: var(--font-xs);
            color: var(--text-muted);
            margin-top: var(--space-xs);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-lg);
        }

        @media (max-width: 480px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
            cursor: pointer;
        }

        .category-input-wrapper {
            display: flex;
            gap: var(--space-sm);
        }

        .category-input-wrapper .form-control {
            flex: 1;
        }

        .category-select {
            width: auto;
            min-width: 130px;
        }

        /* ===== Toast 通知 ===== */
        .toast-container {
            position: fixed;
            top: var(--space-xl);
            right: var(--space-xl);
            z-index: 300;
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        @media (max-width: 480px) {
            .toast-container {
                left: var(--space-lg);
                right: var(--space-lg);
            }
        }

        .toast {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            min-width: 280px;
            animation: toastEnter 0.3s ease-out;
        }

        @keyframes toastEnter {
            from {
                opacity: 0;
                transform: translateX(100%) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .toast-icon.success { color: var(--success); }
        .toast-icon.error { color: var(--danger); }
        .toast-icon.warning { color: var(--warning); }
        .toast-icon.info { color: var(--info); }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            font-size: var(--font-sm);
            margin-bottom: 2px;
        }

        .toast-message {
            font-size: var(--font-xs);
            color: var(--text-secondary);
        }

        .toast-close {
            width: 24px;
            height: 24px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .toast-close:hover {
            background: var(--danger-light);
            color: var(--danger);
        }

        /* ===== 详情模态框 ===== */
        .view-description {
            background: var(--bg-body);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
            color: var(--text-secondary);
            font-size: var(--font-sm);
            border-left: 3px solid var(--primary);
        }

        .view-content-wrapper {
            background: var(--bg-body);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-bottom: var(--space-lg);
            max-height: 360px;
            overflow-y: auto;
        }

        .view-content {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'SF Mono', 'Fira Code', Consolas, monospace;
            font-size: var(--font-sm);
            line-height: 1.7;
            margin: 0;
            color: var(--text-primary);
        }

        .view-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-md);
            font-size: var(--font-xs);
            color: var(--text-muted);
        }

        .view-meta-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .view-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-xs);
            margin-top: var(--space-md);
        }

        .view-tag {
            background: var(--primary-light);
            color: var(--primary);
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            font-weight: 500;
        }

        /* ===== 加载动画 ===== */
        .loading {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ===== 侧边栏遮罩 ===== */
        .sidebar-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 99;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-normal);
        }

        .sidebar-backdrop.show {
            opacity: 1;
            visibility: visible;
        }

        @media (min-width: 1024px) {
            .sidebar-backdrop {
                display: none;
            }
        }

        /* ===== 复制成功动画 ===== */
        .copy-success {
            animation: copyPulse 0.3s ease;
        }

        @keyframes copyPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: var(--success); }
            100% { transform: scale(1); }
        }

        /* ===== 骨架屏 ===== */
        .skeleton {
            background: linear-gradient(90deg, var(--bg-body) 25%, var(--bg-card) 50%, var(--bg-body) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: var(--radius-md);
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* ===== Backdrop-filter 降级 ===== */
        @supports not (backdrop-filter: blur(1px)) {
            .sidebar {
                background: var(--bg-card);
            }
            .topbar {
                background: var(--bg-card);
            }
        }
    </style>
</head>
<body>
    <!-- SVG 图标库 (Symbol System) -->
    <svg style="display: none;">
        <defs>
            <!-- 搜索 -->
            <symbol id="icon-search" viewBox="0 0 24 24">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.3-4.3"></path>
            </symbol>
            <!-- 加号 -->
            <symbol id="icon-plus" viewBox="0 0 24 24">
                <path d="M12 5v14M5 12h14"></path>
            </symbol>
            <!-- 编辑 -->
            <symbol id="icon-edit" viewBox="0 0 24 24">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </symbol>
            <!-- 删除 -->
            <symbol id="icon-trash" viewBox="0 0 24 24">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </symbol>
            <!-- 复制 -->
            <symbol id="icon-copy" viewBox="0 0 24 24">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </symbol>
            <!-- 勾选 -->
            <symbol id="icon-check" viewBox="0 0 24 24">
                <polyline points="20 6 9 17 4 12"></polyline>
            </symbol>
            <!-- 关闭 -->
            <symbol id="icon-x" viewBox="0 0 24 24">
                <path d="M18 6 6 18M6 6l12 12"></path>
            </symbol>
            <!-- 网格 -->
            <symbol id="icon-grid" viewBox="0 0 24 24">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </symbol>
            <!-- 星星 -->
            <symbol id="icon-star" viewBox="0 0 24 24">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </symbol>
            <!-- 标签 -->
            <symbol id="icon-tag" viewBox="0 0 24 24">
                <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                <line x1="7" y1="7" x2="7.01" y2="7"></line>
            </symbol>
            <!-- 文件夹 -->
            <symbol id="icon-folder" viewBox="0 0 24 24">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            </symbol>
            <!-- 设置 -->
            <symbol id="icon-settings" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </symbol>
            <!-- 菜单 -->
            <symbol id="icon-menu" viewBox="0 0 24 24">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </symbol>
            <!-- 太阳 -->
            <symbol id="icon-sun" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </symbol>
            <!-- 月亮 -->
            <symbol id="icon-moon" viewBox="0 0 24 24">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </symbol>
            <!-- 云 -->
            <symbol id="icon-cloud" viewBox="0 0 24 24">
                <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
            </symbol>
            <!-- 登录 -->
            <symbol id="icon-log-in" viewBox="0 0 24 24">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                <polyline points="10 17 15 12 10 7"></polyline>
                <line x1="15" y1="12" x2="3" y2="12"></line>
            </symbol>
            <!-- 登出 -->
            <symbol id="icon-log-out" viewBox="0 0 24 24">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </symbol>
            <!-- 更多 -->
            <symbol id="icon-more" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="1"></circle>
                <circle cx="12" cy="5" r="1"></circle>
                <circle cx="12" cy="19" r="1"></circle>
            </symbol>
            <!-- 眼睛 -->
            <symbol id="icon-eye" viewBox="0 0 24 24">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
            </symbol>
            <!-- 筛选 -->
            <symbol id="icon-filter" viewBox="0 0 24 24">
                <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </symbol>
            <!-- 上传 -->
            <symbol id="icon-upload" viewBox="0 0 24 24">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </symbol>
            <!-- 下载 -->
            <symbol id="icon-download" viewBox="0 0 24 24">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </symbol>
            <!-- 锁 -->
            <symbol id="icon-lock" viewBox="0 0 24 24">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </symbol>
            <!-- 地球 -->
            <symbol id="icon-globe" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            </symbol>
            <!-- 图钉 -->
            <symbol id="icon-pin" viewBox="0 0 24 24">
                <path d="M12 17v5"></path>
                <path d="M9 11V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v7"></path>
                <path d="M17 11h-10l1 6h8l1-6z"></path>
            </symbol>
            <!-- 日历 -->
            <symbol id="icon-calendar" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </symbol>
            <!-- 刷新 -->
            <symbol id="icon-refresh" viewBox="0 0 24 24">
                <polyline points="23 4 23 10 17 10"></polyline>
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </symbol>
        </defs>
    </svg>

    <div class="app-shell">
        <!-- 侧边栏遮罩 -->
        <div class="sidebar-backdrop" id="sidebarBackdrop" onclick="toggleSidebar()"></div>

        <!-- 侧边栏 -->
        <aside class="sidebar" id="sidebar" role="navigation" aria-label="侧边导航">
            <header class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <span class="icon"><svg><use href="#icon-grid"/></svg></span>
                    </div>
                    <span>提示词管理</span>
                </div>
            </header>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">视图</div>
                    <button class="nav-item active" onclick="setVisibilityFilter('all')" aria-current="page">
                        <span class="icon"><svg><use href="#icon-grid"/></svg></span>
                        <span>全部提示词</span>
                        <span class="nav-item-count" id="countAll">0</span>
                    </button>
                    <button class="nav-item" onclick="setVisibilityFilter('public')">
                        <span class="icon"><svg><use href="#icon-globe"/></svg></span>
                        <span>公开</span>
                        <span class="nav-item-count" id="countPublic">0</span>
                    </button>
                    <button class="nav-item" onclick="setVisibilityFilter('private')">
                        <span class="icon"><svg><use href="#icon-lock"/></svg></span>
                        <span>私密</span>
                        <span class="nav-item-count" id="countPrivate">0</span>
                    </button>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">分类</div>
                    <div id="categoryNav"></div>
                </div>
            </nav>

            <footer class="sidebar-footer">
                <div class="sync-status" id="statusIndicator">
                    <span class="sync-dot" id="syncDot"></span>
                    <span id="statusText">未登录</span>
                </div>
            </footer>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 顶部栏 -->
            <header class="topbar">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <span class="icon icon-lg"><svg><use href="#icon-menu"/></svg></span>
                </button>

                <div class="search-container">
                    <label for="searchInput" class="sr-only">搜索提示词</label>
                    <span class="search-icon icon" aria-hidden="true"><svg><use href="#icon-search"/></svg></span>
                    <input type="text" class="search-input" placeholder="搜索提示词..." id="searchInput" oninput="filterPrompts()" aria-label="搜索提示词">
                </div>

                <div class="topbar-actions">
                    <button class="btn btn-icon btn-ghost" onclick="toggleTheme()" title="切换主题" id="themeToggle">
                        <span class="icon"><svg><use href="#icon-moon"/></svg></span>
                    </button>
                    <button class="btn btn-icon btn-ghost" id="loginBtn" onclick="showLoginModal()" title="登录">
                        <span class="icon"><svg><use href="#icon-log-in"/></svg></span>
                    </button>
                    <button class="btn btn-icon btn-ghost" id="syncBtn" onclick="syncToCloud()" title="同步" style="display: none;">
                        <span class="icon"><svg><use href="#icon-cloud"/></svg></span>
                    </button>
                    <button class="btn btn-primary desktop-only" onclick="showAddPromptModal()">
                        <span class="icon"><svg><use href="#icon-plus"/></svg></span>
                        <span>新建</span>
                    </button>
                </div>
            </header>

            <!-- 内容区域 -->
            <div class="content-area">
                <!-- 工具栏 -->
                <div class="toolbar">
                    <div class="filter-group">
                        <select class="select-control" id="categoryFilter" onchange="filterPrompts()">
                            <option value="all">全部分类</option>
                        </select>
                        <select class="select-control" id="sortBy" onchange="sortPrompts()">
                            <option value="updated">最近更新</option>
                            <option value="created">创建时间</option>
                            <option value="name">名称排序</option>
                            <option value="usage">使用次数</option>
                        </select>
                    </div>
                    <div class="filter-group" style="margin-left: auto;">
                        <button class="btn btn-secondary btn-sm" onclick="showImportModal()">
                            <span class="icon icon-sm"><svg><use href="#icon-upload"/></svg></span>
                            <span>导入</span>
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="exportData()">
                            <span class="icon icon-sm"><svg><use href="#icon-download"/></svg></span>
                            <span>导出</span>
                        </button>
                    </div>
                </div>

                <!-- 提示词网格 -->
                <div class="prompts-grid" id="promptsGrid"></div>

                <!-- 空状态 -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">
                        <span class="icon icon-lg"><svg><use href="#icon-grid"/></svg></span>
                    </div>
                    <h3 class="empty-title">还没有提示词</h3>
                    <p class="empty-text">点击「新建」按钮创建你的第一个提示词</p>
                    <button class="btn btn-primary" onclick="showAddPromptModal()">
                        <span class="icon"><svg><use href="#icon-plus"/></svg></span>
                        <span>新建提示词</span>
                    </button>
                </div>
            </div>
        </main>

        <!-- 移动端 FAB -->
        <button class="fab mobile-only" onclick="showAddPromptModal()">
            <span class="icon icon-lg"><svg><use href="#icon-plus"/></svg></span>
        </button>
    </div>

    <!-- Toast 容器 -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- 新建/编辑提示词模态框 -->
    <div class="modal-overlay" id="promptModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">新建提示词</h2>
                <button class="modal-close" onclick="closeModal('promptModal')">
                    <span class="icon"><svg><use href="#icon-x"/></svg></span>
                </button>
            </div>
            <div class="modal-body">
                <form id="promptForm" onsubmit="savePrompt(event)">
                    <div class="form-group">
                        <label class="form-label">标题 *</label>
                        <input type="text" class="form-control" id="promptTitle" placeholder="给你的提示词起个名字" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">描述</label>
                        <input type="text" class="form-control" id="promptDescription" placeholder="简单介绍一下这个提示词的用途">
                        <span class="form-hint">可选，用于快速了解提示词用途</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">内容 *</label>
                        <textarea class="form-control" id="promptContent" placeholder="在这里输入提示词内容..." rows="6" required></textarea>
                        <span class="form-hint">支持 Markdown 格式</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">分类</label>
                            <div class="category-input-wrapper">
                                <input type="text" class="form-control" id="promptCategory" placeholder="输入分类">
                                <select class="form-control category-select" id="categorySelect" onchange="selectCategory()">
                                    <option value="">选择已有</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">标签</label>
                            <input type="text" class="form-control" id="promptTags" placeholder="用逗号分隔">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-group">
                                <input type="checkbox" class="checkbox" id="promptPrivate">
                                <span>私密（仅登录后可见）</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-group">
                                <input type="checkbox" class="checkbox" id="promptPinned">
                                <span>置顶显示</span>
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('promptModal')">取消</button>
                <button class="btn btn-primary" onclick="document.getElementById('promptForm').requestSubmit()">
                    <span class="icon icon-sm"><svg><use href="#icon-check"/></svg></span>
                    <span>保存</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 登录模态框 -->
    <div class="modal-overlay" id="loginModal" role="dialog" aria-modal="true" aria-label="登录">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 class="modal-title">登录</h2>
                <button class="modal-close" onclick="closeModal('loginModal')">
                    <span class="icon"><svg><use href="#icon-x"/></svg></span>
                </button>
            </div>
            <div class="modal-body">
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label class="form-label">密码</label>
                        <input type="password" class="form-control" id="loginPassword" placeholder="输入云端同步密码" required>
                        <span class="form-hint">输入密码后可同步数据到云端</span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('loginModal')">取消</button>
                <button class="btn btn-primary" onclick="document.getElementById('loginForm').requestSubmit()">
                    <span class="icon icon-sm"><svg><use href="#icon-log-in"/></svg></span>
                    <span>登录</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 导入模态框 -->
    <div class="modal-overlay" id="importModal" role="dialog" aria-modal="true" aria-label="导入数据">
        <div class="modal-content" style="max-width: 440px;">
            <div class="modal-header">
                <h2 class="modal-title">导入数据</h2>
                <button class="modal-close" onclick="closeModal('importModal')">
                    <span class="icon"><svg><use href="#icon-x"/></svg></span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">选择文件</label>
                    <input type="file" class="form-control" id="importFile" accept=".json">
                    <span class="form-hint">支持 JSON 格式的数据文件</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('importModal')">取消</button>
                <button class="btn btn-primary" onclick="handleImport()">
                    <span class="icon icon-sm"><svg><use href="#icon-upload"/></svg></span>
                    <span>导入</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 查看提示词详情模态框 -->
    <div class="modal-overlay" id="viewModal" role="dialog" aria-modal="true" aria-labelledby="viewModalTitle">
        <div class="modal-content" style="max-width: 640px;">
            <div class="modal-header">
                <h2 class="modal-title" id="viewModalTitle">提示词详情</h2>
                <button class="modal-close" onclick="closeModal('viewModal')">
                    <span class="icon"><svg><use href="#icon-x"/></svg></span>
                </button>
            </div>
            <div class="modal-body">
                <div id="viewDescription" class="view-description" style="display: none;"></div>
                <div class="view-content-wrapper">
                    <pre class="view-content" id="viewContent"></pre>
                </div>
                <div class="view-meta" id="viewMeta"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('viewModal')">关闭</button>
                <button class="btn btn-secondary" onclick="editPromptFromView()">
                    <span class="icon icon-sm"><svg><use href="#icon-edit"/></svg></span>
                    <span>编辑</span>
                </button>
                <button class="btn btn-primary" onclick="copyFromView()">
                    <span class="icon icon-sm"><svg><use href="#icon-copy"/></svg></span>
                    <span>复制内容</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== 全局变量 =====
        let appData = {
            prompts: [],
            settings: {
                theme: 'light'
            }
        };

        let authState = {
            isLoggedIn: false,
            token: localStorage.getItem('authToken') || null,
            lastSync: null
        };

        let editingPromptId = null;
        let viewingPromptId = null;
        let currentVisibilityFilter = 'all';

        // ===== 初始化 =====
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            loadData();
            renderPrompts();
            updateCategories();
            updateCounts();
            checkAuth();
        });

        // ===== 主题切换 =====
        function initTheme() {
            const savedTheme = localStorage.getItem('promptManagerTheme') ||
                              (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            applyTheme(savedTheme);
        }

        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            appData.settings.theme = theme;
            updateThemeIcon();
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
            localStorage.setItem('promptManagerTheme', newTheme);
            saveData();
        }

        function updateThemeIcon() {
            const themeToggle = document.getElementById('themeToggle');
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            themeToggle.innerHTML = `<span class="icon"><svg><use href="#icon-${isDark ? 'sun' : 'moon'}"/></svg></span>`;
        }

        // ===== 侧边栏 =====
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const backdrop = document.getElementById('sidebarBackdrop');
            sidebar.classList.toggle('open');
            backdrop.classList.toggle('show');
        }

        // ===== 数据管理 =====
        function saveData() {
            try {
                localStorage.setItem('promptManagerData', JSON.stringify(appData));
                if (authState.isLoggedIn) {
                    clearTimeout(window.syncTimeout);
                    window.syncTimeout = setTimeout(() => syncToCloud(true), 1000);
                }
            } catch (error) {
                showToast('保存失败', error.message, 'error');
            }
        }

        function loadData() {
            try {
                const saved = localStorage.getItem('promptManagerData');
                if (saved) {
                    appData = JSON.parse(saved);
                    if (!appData.prompts) appData.prompts = [];
                    if (!appData.settings) appData.settings = { theme: 'light' };
                }
            } catch (error) {
                console.error('加载数据失败:', error);
                appData = { prompts: [], settings: { theme: 'light' } };
            }
        }

        // ===== 渲染提示词 =====
        function renderPrompts() {
            const grid = document.getElementById('promptsGrid');
            const emptyState = document.getElementById('emptyState');

            let prompts = getFilteredPrompts();
            prompts = sortPromptsList(prompts);

            if (prompts.length === 0) {
                grid.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            grid.innerHTML = prompts.map(prompt => {
                const isPrivate = prompt.isPrivate === true;
                const isPinned = prompt.isPinned || false;
                const category = prompt.category || '未分类';
                const usage = prompt.usage || 0;
                const updatedAt = prompt.updatedAt ? new Date(prompt.updatedAt).toLocaleDateString() : '';

                if (isPrivate && !authState.isLoggedIn) {
                    return '';
                }

                return `
                    <article class="prompt-card ${isPrivate ? 'private' : 'public'}" onclick="viewPrompt('${prompt.id}')">
                        <div class="card-header">
                            <h3 class="card-title">${escapeHtml(prompt.title)}</h3>
                            <div class="card-badges">
                                ${isPinned ? '<span class="badge badge-pinned"><span class="icon icon-sm"><svg><use href="#icon-pin"/></svg></span></span>' : ''}
                                <span class="badge ${isPrivate ? 'badge-private' : 'badge-public'}">
                                    <span class="icon icon-sm"><svg><use href="#icon-${isPrivate ? 'lock' : 'globe'}"/></svg></span>
                                    ${isPrivate ? '私密' : '公开'}
                                </span>
                            </div>
                        </div>
                        <div class="card-content">
                            ${prompt.description ? `<div class="card-description">${escapeHtml(prompt.description)}</div>` : ''}
                            <div class="card-preview">${escapeHtml(prompt.content)}</div>
                        </div>
                        <div class="card-footer">
                            <div class="card-meta">
                                <span class="card-meta-item">
                                    <span class="icon icon-sm"><svg><use href="#icon-folder"/></svg></span>
                                    ${escapeHtml(category)}
                                </span>
                                <span class="card-meta-item">
                                    <span class="icon icon-sm"><svg><use href="#icon-eye"/></svg></span>
                                    ${usage}
                                </span>
                            </div>
                            <div class="card-actions" onclick="event.stopPropagation()">
                                <button class="btn btn-ghost btn-sm btn-icon" onclick="copyPromptContent('${prompt.id}')" title="复制">
                                    <span class="icon icon-sm"><svg><use href="#icon-copy"/></svg></span>
                                </button>
                                <button class="btn btn-ghost btn-sm btn-icon" onclick="editPrompt('${prompt.id}')" title="编辑">
                                    <span class="icon icon-sm"><svg><use href="#icon-edit"/></svg></span>
                                </button>
                                <button class="btn btn-ghost btn-sm btn-icon" onclick="deletePrompt('${prompt.id}')" title="删除">
                                    <span class="icon icon-sm"><svg><use href="#icon-trash"/></svg></span>
                                </button>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');
        }

        // ===== 筛选提示词 =====
        function getFilteredPrompts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;

            return appData.prompts.filter(prompt => {
                const matchesSearch = !searchTerm ||
                    prompt.title.toLowerCase().includes(searchTerm) ||
                    prompt.content.toLowerCase().includes(searchTerm) ||
                    (prompt.category && prompt.category.toLowerCase().includes(searchTerm));

                const isPrivate = prompt.isPrivate === true;
                let matchesVisibility = true;
                if (currentVisibilityFilter === 'public') {
                    matchesVisibility = !isPrivate;
                } else if (currentVisibilityFilter === 'private') {
                    matchesVisibility = isPrivate;
                }

                const matchesCategory = categoryFilter === 'all' ||
                    prompt.category === categoryFilter;

                return matchesSearch && matchesVisibility && matchesCategory;
            });
        }

        function setVisibilityFilter(filter) {
            currentVisibilityFilter = filter;

            // 更新侧边栏激活状态和 ARIA
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                item.removeAttribute('aria-current');
            });
            const activeItem = event.target.closest('.nav-item');
            activeItem.classList.add('active');
            activeItem.setAttribute('aria-current', 'page');

            renderPrompts();

            // 移动端关闭侧边栏
            if (window.innerWidth < 1024) {
                toggleSidebar();
            }
        }

        // ===== 排序提示词 =====
        function sortPromptsList(prompts) {
            const sortBy = document.getElementById('sortBy').value;

            return [...prompts].sort((a, b) => {
                if (a.isPinned && !b.isPinned) return -1;
                if (!a.isPinned && b.isPinned) return 1;

                switch (sortBy) {
                    case 'updated':
                        return new Date(b.updatedAt || 0) - new Date(a.updatedAt || 0);
                    case 'created':
                        return new Date(b.createdAt || 0) - new Date(a.createdAt || 0);
                    case 'name':
                        return a.title.localeCompare(b.title);
                    case 'usage':
                        return (b.usage || 0) - (a.usage || 0);
                    default:
                        return 0;
                }
            });
        }

        function filterPrompts() {
            renderPrompts();
        }

        function sortPrompts() {
            renderPrompts();
        }

        // ===== 更新分类和计数 =====
        function updateCategories() {
            const categories = [...new Set(appData.prompts.map(p => p.category).filter(Boolean))];
            const categoryFilter = document.getElementById('categoryFilter');
            const categorySelect = document.getElementById('categorySelect');
            const categoryNav = document.getElementById('categoryNav');

            const currentValue = categoryFilter.value;
            categoryFilter.innerHTML = '<option value="all">全部分类</option>' +
                categories.map(cat => `<option value="${escapeHtml(cat)}">${escapeHtml(cat)}</option>`).join('');
            categoryFilter.value = currentValue;

            categorySelect.innerHTML = '<option value="">选择已有</option>' +
                categories.map(cat => `<option value="${escapeHtml(cat)}">${escapeHtml(cat)}</option>`).join('');

            // 更新侧边栏分类导航
            categoryNav.innerHTML = categories.map(cat => {
                const count = appData.prompts.filter(p => p.category === cat).length;
                return `
                    <button class="nav-item" onclick="setCategoryFilter('${escapeHtml(cat)}')">
                        <span class="icon"><svg><use href="#icon-folder"/></svg></span>
                        <span>${escapeHtml(cat)}</span>
                        <span class="nav-item-count">${count}</span>
                    </button>
                `;
            }).join('');
        }

        function updateCounts() {
            const all = appData.prompts.length;
            const publicCount = appData.prompts.filter(p => p.isPrivate !== true).length;
            const privateCount = appData.prompts.filter(p => p.isPrivate === true).length;

            document.getElementById('countAll').textContent = all;
            document.getElementById('countPublic').textContent = publicCount;
            document.getElementById('countPrivate').textContent = privateCount;
        }

        function setCategoryFilter(category) {
            document.getElementById('categoryFilter').value = category;
            currentVisibilityFilter = 'all';
            renderPrompts();

            if (window.innerWidth < 1024) {
                toggleSidebar();
            }
        }

        function selectCategory() {
            const categorySelect = document.getElementById('categorySelect');
            const categoryInput = document.getElementById('promptCategory');
            if (categorySelect.value) {
                categoryInput.value = categorySelect.value;
                categorySelect.value = '';
            }
        }

        // ===== 模态框操作 =====
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('show');
            document.body.classList.add('modal-open');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
            document.body.classList.remove('modal-open');
        }

        function showAddPromptModal() {
            editingPromptId = null;
            document.getElementById('modalTitle').textContent = '新建提示词';
            document.getElementById('promptForm').reset();
            document.getElementById('categorySelect').value = '';
            updateCategories();
            showModal('promptModal');
        }

        function editPrompt(id) {
            const prompt = appData.prompts.find(p => p.id === id);
            if (!prompt) return;

            editingPromptId = id;
            document.getElementById('modalTitle').textContent = '编辑提示词';
            document.getElementById('promptTitle').value = prompt.title;
            document.getElementById('promptDescription').value = prompt.description || '';
            document.getElementById('promptContent').value = prompt.content;
            document.getElementById('promptCategory').value = prompt.category || '';
            document.getElementById('promptTags').value = (prompt.tags || []).join(', ');
            document.getElementById('promptPrivate').checked = prompt.isPrivate || false;
            document.getElementById('promptPinned').checked = prompt.isPinned || false;
            document.getElementById('categorySelect').value = '';

            updateCategories();
            showModal('promptModal');
        }

        function viewPrompt(id) {
            const prompt = appData.prompts.find(p => p.id === id);
            if (!prompt) return;

            viewingPromptId = id;
            prompt.usage = (prompt.usage || 0) + 1;
            saveData();

            document.getElementById('viewModalTitle').textContent = prompt.title;
            document.getElementById('viewContent').textContent = prompt.content;

            const descriptionEl = document.getElementById('viewDescription');
            if (prompt.description) {
                descriptionEl.textContent = prompt.description;
                descriptionEl.style.display = 'block';
            } else {
                descriptionEl.style.display = 'none';
            }

            const category = prompt.category || '未分类';
            const usage = prompt.usage || 0;
            const createdAt = prompt.createdAt ? new Date(prompt.createdAt).toLocaleDateString() : '';
            const updatedAt = prompt.updatedAt ? new Date(prompt.updatedAt).toLocaleDateString() : '';
            const tags = prompt.tags || [];
            const isPrivate = prompt.isPrivate === true;

            let metaHtml = `
                <span class="view-meta-item"><span class="icon icon-sm"><svg><use href="#icon-folder"/></svg></span> ${escapeHtml(category)}</span>
                <span class="view-meta-item"><span class="icon icon-sm"><svg><use href="#icon-eye"/></svg></span> 使用 ${usage} 次</span>
                ${createdAt ? `<span class="view-meta-item"><span class="icon icon-sm"><svg><use href="#icon-calendar"/></svg></span> 创建于 ${createdAt}</span>` : ''}
                ${updatedAt ? `<span class="view-meta-item"><span class="icon icon-sm"><svg><use href="#icon-refresh"/></svg></span> 更新于 ${updatedAt}</span>` : ''}
                <span class="view-meta-item"><span class="icon icon-sm"><svg><use href="#icon-${isPrivate ? 'lock' : 'globe'}"/></svg></span> ${isPrivate ? '私密' : '公开'}</span>
            `;

            if (tags.length > 0) {
                metaHtml += `<div class="view-tags">${tags.map(tag => `<span class="view-tag">${escapeHtml(tag)}</span>`).join('')}</div>`;
            }

            document.getElementById('viewMeta').innerHTML = metaHtml;

            showModal('viewModal');
            renderPrompts();
        }

        function editPromptFromView() {
            if (viewingPromptId) {
                closeModal('viewModal');
                editPrompt(viewingPromptId);
            }
        }

        function copyFromView() {
            const prompt = appData.prompts.find(p => p.id === viewingPromptId);
            if (!prompt) return;

            navigator.clipboard.writeText(prompt.content).then(() => {
                showToast('复制成功', '提示词内容已复制到剪贴板', 'success');
            }).catch(err => {
                showToast('复制失败', err.message, 'error');
            });
        }

        function copyPromptContent(id) {
            const prompt = appData.prompts.find(p => p.id === id);
            if (!prompt) return;

            navigator.clipboard.writeText(prompt.content).then(() => {
                showToast('复制成功', '提示词内容已复制到剪贴板', 'success');
                prompt.usage = (prompt.usage || 0) + 1;
                saveData();
                renderPrompts();
            }).catch(err => {
                showToast('复制失败', err.message, 'error');
            });
        }

        function deletePrompt(id) {
            if (!confirm('确定要删除这个提示词吗？')) return;

            appData.prompts = appData.prompts.filter(p => p.id !== id);
            saveData();
            renderPrompts();
            updateCategories();
            updateCounts();
            showToast('删除成功', '提示词已删除', 'success');
        }

        function savePrompt(event) {
            event.preventDefault();

            const title = document.getElementById('promptTitle').value.trim();
            const description = document.getElementById('promptDescription').value.trim();
            const content = document.getElementById('promptContent').value.trim();
            const category = document.getElementById('promptCategory').value.trim();
            const tagsStr = document.getElementById('promptTags').value.trim();
            const tags = tagsStr ? tagsStr.split(/[,，、;；\s]+/).map(t => t.trim()).filter(Boolean) : [];
            const isPrivate = document.getElementById('promptPrivate').checked;
            const isPinned = document.getElementById('promptPinned').checked;

            if (!title || !content) {
                showToast('保存失败', '标题和内容不能为空', 'error');
                return;
            }

            if (editingPromptId) {
                const prompt = appData.prompts.find(p => p.id === editingPromptId);
                if (prompt) {
                    prompt.title = title;
                    prompt.description = description;
                    prompt.content = content;
                    prompt.category = category;
                    prompt.tags = tags;
                    prompt.isPrivate = isPrivate;
                    prompt.isPinned = isPinned;
                    prompt.updatedAt = new Date().toISOString();
                }
            } else {
                const newPrompt = {
                    id: generateId(),
                    title,
                    description,
                    content,
                    category,
                    tags,
                    isPrivate,
                    isPinned,
                    usage: 0,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                appData.prompts.push(newPrompt);
            }

            saveData();
            renderPrompts();
            updateCategories();
            updateCounts();
            closeModal('promptModal');
            showToast('保存成功', editingPromptId ? '提示词已更新' : '提示词已创建', 'success');
        }

        // ===== 登录认证 =====
        function checkAuth() {
            if (authState.token) {
                verifyToken();
            }
        }

        async function verifyToken() {
            try {
                const response = await fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${authState.token}`
                    }
                });

                if (response.ok) {
                    authState.isLoggedIn = true;
                    updateAuthUI();
                    await loadFromCloud(true);
                } else {
                    logout();
                }
            } catch (error) {
                console.error('验证失败:', error);
                authState.isLoggedIn = true;
                updateAuthUI();
            }
        }

        function showLoginModal() {
            showModal('loginModal');
        }

        async function handleLogin(event) {
            event.preventDefault();

            const password = document.getElementById('loginPassword').value;

            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password })
                });

                const result = await response.json();

                if (response.ok && result.success) {
                    authState.token = result.token;
                    authState.isLoggedIn = true;
                    localStorage.setItem('authToken', result.token);

                    updateAuthUI();
                    closeModal('loginModal');
                    showToast('登录成功', '已连接到云端', 'success');

                    await loadFromCloud();
                } else {
                    showToast('登录失败', result.error || '密码错误', 'error');
                }
            } catch (error) {
                showToast('登录失败', '无法连接到服务器', 'error');
            }
        }

        function logout() {
            authState.isLoggedIn = false;
            authState.token = null;
            localStorage.removeItem('authToken');
            updateAuthUI();
            renderPrompts();
            showToast('已退出', '已退出登录', 'info');
        }

        function updateAuthUI() {
            const loginBtn = document.getElementById('loginBtn');
            const syncBtn = document.getElementById('syncBtn');
            const syncDot = document.getElementById('syncDot');
            const statusText = document.getElementById('statusText');

            if (authState.isLoggedIn) {
                loginBtn.innerHTML = '<span class="icon"><svg><use href="#icon-log-out"/></svg></span>';
                loginBtn.onclick = logout;
                loginBtn.title = '退出登录';
                syncBtn.style.display = 'inline-flex';
                syncDot.classList.add('online');
                statusText.textContent = '已登录';

                if (authState.lastSync) {
                    const syncTime = new Date(authState.lastSync).toLocaleTimeString();
                    statusText.textContent = `已同步 ${syncTime}`;
                }
            } else {
                loginBtn.innerHTML = '<span class="icon"><svg><use href="#icon-log-in"/></svg></span>';
                loginBtn.onclick = showLoginModal;
                loginBtn.title = '登录';
                syncBtn.style.display = 'none';
                syncDot.classList.remove('online');
                statusText.textContent = '未登录';
            }
        }

        // ===== 云端同步 =====
        async function syncToCloud(silent = false) {
            if (!authState.isLoggedIn) {
                if (!silent) showToast('同步失败', '请先登录', 'error');
                return;
            }

            try {
                const syncBtn = document.getElementById('syncBtn');
                syncBtn.innerHTML = '<span class="loading"></span>';
                syncBtn.disabled = true;

                const response = await fetch('/api/data/sync', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authState.token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(appData)
                });

                syncBtn.innerHTML = '<span class="icon"><svg><use href="#icon-cloud"/></svg></span>';
                syncBtn.disabled = false;

                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        authState.lastSync = new Date().toISOString();
                        updateAuthUI();
                        if (!silent) showToast('同步成功', '数据已同步到云端', 'success');
                    } else {
                        if (!silent) showToast('同步失败', result.error || '未知错误', 'error');
                    }
                } else {
                    if (response.status === 401) {
                        logout();
                        if (!silent) showToast('同步失败', '登录已过期，请重新登录', 'error');
                    } else {
                        if (!silent) showToast('同步失败', '服务器错误', 'error');
                    }
                }
            } catch (error) {
                const syncBtn = document.getElementById('syncBtn');
                syncBtn.innerHTML = '<span class="icon"><svg><use href="#icon-cloud"/></svg></span>';
                syncBtn.disabled = false;
                if (!silent) showToast('同步失败', '无法连接到服务器', 'error');
            }
        }

        async function loadFromCloud(silent = false) {
            if (!authState.isLoggedIn) {
                if (!silent) showToast('加载失败', '请先登录', 'error');
                return;
            }

            try {
                const response = await fetch('/api/data/load', {
                    headers: {
                        'Authorization': `Bearer ${authState.token}`
                    }
                });

                if (response.ok) {
                    const result = await response.json();

                    if (result.data) {
                        const cloudData = result.data;

                        if (cloudData.prompts && Array.isArray(cloudData.prompts)) {
                            const cloudIds = new Set(cloudData.prompts.map(p => p.id));
                            const localOnlyPrompts = appData.prompts.filter(p => !cloudIds.has(p.id));

                            appData.prompts = [...cloudData.prompts, ...localOnlyPrompts];

                            if (cloudData.settings) {
                                appData.settings = { ...appData.settings, ...cloudData.settings };
                            }

                            saveData();
                            renderPrompts();
                            updateCategories();
                            updateCounts();
                        }

                        authState.lastSync = result.lastSync ? new Date(result.lastSync).toISOString() : new Date().toISOString();
                        updateAuthUI();
                        if (!silent) showToast('加载成功', '已从云端加载数据', 'success');
                    } else {
                        if (!silent) showToast('提示', '云端暂无数据，将上传本地数据', 'info');
                        await syncToCloud(silent);
                    }
                } else {
                    if (response.status === 401) {
                        logout();
                        if (!silent) showToast('加载失败', '登录已过期，请重新登录', 'error');
                    } else {
                        if (!silent) showToast('加载失败', '服务器错误', 'error');
                    }
                }
            } catch (error) {
                if (!silent) showToast('加载失败', '无法连接到服务器', 'error');
            }
        }

        // ===== 导入导出 =====
        function showImportModal() {
            showModal('importModal');
        }

        function handleImport() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];

            if (!file) {
                showToast('导入失败', '请选择文件', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);

                    if (imported.prompts && Array.isArray(imported.prompts)) {
                        imported.prompts.forEach(prompt => {
                            const exists = appData.prompts.find(p => p.id === prompt.id);
                            if (!exists) {
                                appData.prompts.push(prompt);
                            }
                        });

                        saveData();
                        renderPrompts();
                        updateCategories();
                        updateCounts();
                        closeModal('importModal');
                        showToast('导入成功', `已导入 ${imported.prompts.length} 个提示词`, 'success');
                    } else {
                        showToast('导入失败', '无效的数据格式', 'error');
                    }
                } catch (error) {
                    showToast('导入失败', error.message, 'error');
                }
            };
            reader.readAsText(file);
        }

        function exportData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);

            const link = document.createElement('a');
            link.href = url;
            link.download = `prompts-${new Date().toISOString().split('T')[0]}.json`;
            link.click();

            URL.revokeObjectURL(url);
            showToast('导出成功', '数据已导出', 'success');
        }

        // ===== 工具函数 =====
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showToast(title, message, type = 'info') {
            const container = document.getElementById('toastContainer');

            const iconMap = {
                success: 'check',
                error: 'x',
                warning: 'x',
                info: 'eye'
            };

            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <span class="toast-icon ${type}">
                    <svg><use href="#icon-${iconMap[type] || 'eye'}"/></svg>
                </span>
                <div class="toast-content">
                    <div class="toast-title">${escapeHtml(title)}</div>
                    <div class="toast-message">${escapeHtml(message)}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <svg><use href="#icon-x"/></svg>
                </button>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'toastEnter 0.3s ease-out reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ===== 生命周期 =====
        window.addEventListener('beforeunload', function() {
            if (authState.isLoggedIn) {
                syncToCloud(true);
            }
        });

        setInterval(() => {
            if (authState.isLoggedIn) {
                syncToCloud(true);
            }
        }, 5 * 60 * 1000);
    </script>
</body>
</html>
